const artDown = `⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣴⣶⣶⣤⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⣿⣿⣿⣿⣿⣿⣤⣤⣄⣀⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⡿⠟⠋⠁⠀⠀⠀⠀⠀⠈⠉⠛⠦⣄⡀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⢠⡼⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠙⢦⣶⣶⣶⣦⣄⠀
⠀⠀⠀⠀⠀⠀⠀⢠⡟⠀⠀⠀⠀⣀⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠙⣿⣿⣿⣿⣦
⠀⢀⣀⣀⡀⠀⠀⡿⠀⠀⢀⣴⣿⣿⣿⣷⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⣿⣿⣿⡟
⢀⣿⣿⣿⣿⣦⣄⡇⠈⠋⢸⣿⣿⣯⣼⠏⠀⠀⠀⠀⠀⢀⣰⣦⣄⠀⠀⠀⠀⢹⡿⠋⠀
⠈⣿⣿⣿⣿⣿⣿⣿⠀⠀⢀⣙⠛⠛⠁⠀⠀⣦⣤⡀⠀⣾⡟⣿⣿⣷⠀⠀⠀⢸⠂⠀⠀
⠀⠹⣿⣿⣿⣿⣿⣿⣧⡀⠉⠁⠀⠀⠀⠻⣤⣿⣉⣩⠀⠹⣷⣿⣿⡿⠀⠀⠀⣼⠀⠀⠀
⠀⠀⠘⣿⣿⣿⣿⣿⣿⣿⣶⣄⡀⠀⠀⠀⠀⠈⠉⠁⠀⠀⢨⡉⠉⠀⢸⠀⣼⠃⠀⠀⠀
⠀⠀⠀⠈⢻⣿⣿⣿⣿⣿⣿⣿⣿⣷⣦⣄⣀⠀⠀⠀⠀⠀⠀⠑⠆⠀⣠⡾⠁⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠙⡟⠛⠻⠿⠿⠿⣿⣿⣿⣿⣿⣿⣿⣷⣶⣶⣶⣶⣿⣏⠁⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⢰⠃⠀⠀⠀⠀⠀⠀⠀⠉⠛⠛⠿⢿⣿⣿⣿⣿⣿⣿⣿⣆⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠙⣿⣿⣿⣿⣿⣿⣆⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⢿⣿⣿⣿⣿⣿⡄⠀⠀⠀⠀
⠀⠀⠀⠀⠀⢹⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⣿⣿⣿⣿⣿⡇⠀⠀⠀⠀
⠀⠀⠀⠀⠀⢸⣿⣆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⣿⣿⣿⣿⣿⠇⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠈⣿⣿⣷⣦⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣴⣿⣿⠈⠙⠛⠉⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⣿⡗⠒⠶⠤⠤⣶⣶⣿⣿⣿⣿⡿⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⢸⣿⣿⣿⣿⣿⠃⠀⠀⠀⠀⢸⣿⣿⣿⣿⣿⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠙⠿⠿⠿⠃⠀⠀⠀⠀⠀⠀⠙⠿⠿⠟⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀`;

const artUp = `⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣴⣶⣶⣤⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⣿⣿⣿⣿⣿⣿⣤⣤⣄⣀⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⡿⠟⠋⠁⠀⠀⠀⠀⠀⠈⠉⠛⠦⣄⡀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⢠⡼⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠙⢦⣶⣶⣶⣦⣄⠀
⠀⠀⠀⠀⠀⠀⠀⢠⡟⠀⠀⠀⠀⣀⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠙⣿⣿⣿⣿⣦
         ⡿⠀⠀⢀⣴⣿⣿⣿⣷⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⣿⣿⣿⡟
        ⣄⡇⠈⠋⢸⣿⣿⣯⣼⠏⠀⠀⠀⠀⠀⢀⣰⣦⣄⠀⠀⠀⠀⢹⡿⠋⠀
         ⣿⠀   ⣙⠛⠛⠁⠀⠀⣦⣤⡀⠀⣾⡟⣿⣿⣷⠀⠀⠀⢸⠂⠀⠀
          ⣧⡀⠉⠁⠀⠀⠀⠻⣤⣿⣉⣩⠀⠹⣷⣿⣿⡿⠀⠀⠀⣼⠀⠀⠀
           ⣿⣿⣶⣄⡀⠀⠀⠀⠀⠈⠉⠁⠀⠀⢨⡉⠉⠀⢸⠀⣼⠃⠀⠀⠀
⠀⠀⣤⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣦⣄⣀⠀⠀⠀⠀⠀⠀⠑⠆⠀⣠⡾⠁⠀⠀⠀⠀
 ⣿⣿⣿⣿⣿⡟⠛⠻⠿⠿⠿⣿⣿⣿⣿⣿⣿⣿⣷⣶⣶⣶⣶⣿⣏⠁⠀⠀⠀⠀⠀⠀
⣿⣿⣿⣿⣿⡟⠃⠀⠀⠀⠀⠀⠀⠀⠉⠛⠛⠿⢿⣿⣿⣿⣿⣿⣿⣿⣆⠀⠀⠀⠀⠀⠀
⠙⣿⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠙⣿⣿⣿⣿⣿⣿⣆⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⢿⣿⣿⣿⣿⣿⡄⠀⠀⠀⠀
⠀⠀⠀⠀⠀⢹⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⣿⣿⣿⣿⣿⡇⠀⠀⠀⠀
⠀⠀⠀⠀⠀⢸⣿⣆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⣿⣿⣿⣿⣿⠇⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠈⣿⣿⣷⣦⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣴⣿⣿⠈⠙⠛⠉⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⣿⡗⠒⠶⠤⠤⣶⣶⣿⣿⣿⣿⡿⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⢸⣿⣿⣿⣿⣿⠃⠀⠀⠀⠀⢸⣿⣿⣿⣿⣿⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠙⠿⠿⠿⠃⠀⠀⠀⠀⠀⠀⠙⠿⠿⠟⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀`;


const asciiArtElement = document.getElementById('asciiArt');
const screenSizeElement = document.getElementById('screenSize');
const locationElement = document.getElementById('location');
const ipAddressElement = document.getElementById('ipAddress');
const browserInfoElement = document.getElementById('browserInfo');
const vpnStatusElement = document.getElementById('vpnStatus');
const webcamElement = document.getElementById('webcam');

document.addEventListener('DOMContentLoaded', function () {
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js';
    script.onload = function () {
        particlesJS("snow", {
            "particles": {
                "number": {
                    "value": 40,
                    "density": {
                        "enable": true,
                        "value_area": 800
                    }
                },
                "color": {
                    "value": "#ffffff"
                },
                "opacity": {
                    "value": 0.7,
                    "random": true,
                    "anim": {
                        "enable": true
                    }
                },
                "size": {
                    "value": 2.3,
                    "random": true,
                    "anim": {
                        "enable": true
                    }
                },
                "line_linked": {
                    "enable": false
                },
                "move": {
                    "enable": true,
                    "speed": 5,
                    "direction": "bottom",
                    "random": true,
                    "straight": false,
                    "out_mode": "out",
                    "bounce": false,
                    "attract": {
                        "enable": true,
                        "rotateX": 300,
                        "rotateY": 1200
                    }
                }
            },
            "interactivity": {
                "events": {
                    "onhover": {
                        "enable": false
                    },
                    "onclick": {
                        "enable": true
                    },
                    "resize": false
                }
            },
            "retina_detect": true
        });
    };
    document.head.append(script);
});

function updateArt(art) {
    asciiArtElement.textContent = art;
}

function animateWave() {
    let currentArt = 1;
    setInterval(() => {
        if (currentArt === 1) {
            updateArt(artUp);
            currentArt = 2;
        } else {
            updateArt(artDown);
            currentArt = 1;
        }
    }, 500);
}

function updateScreenSize() {
    const width = window.innerWidth;
    const height = window.innerHeight;
    screenSizeElement.textContent = `Width: ${width}px | Height: ${height}px`;
}

function updateLocation() {
    fetch('https://ipinfo.io/json?token=e709412b938f0a')
        .then(response => response.json())
        .then(data => {
            console.log(data);
            const [city, state] = data.city ? [data.city, data.region] : ["City unavailable", "State unavailable"];
            locationElement.textContent = `${city}, ${state}`;
        })
        .catch(error => {
            locationElement.textContent = "Location unavailable";
            console.error("Error fetching location:", error);
        });
}

function updateIP() {
    fetch('https://ipinfo.io/json?token=e709412b938f0a')
        .then(response => response.json())
        .then(data => {
            console.log(data);
            const ip = data.ip || "IP unavailable";
            ipAddressElement.textContent = `IP: ${ip}`;
        })
        .catch(error => {
            ipAddressElement.textContent = "IP unavailable";
            console.error("Error fetching IP:", error);
        });
}

function updateBrowserInfo() {
    const userAgent = navigator.userAgent;
    let browserName = "Unknown Browser";
    let browserVersion = "N/A";

    if (userAgent.includes("Brave")) {
        browserName = "Brave Browser";
    }
    else if (userAgent.includes("DuckDuckGo")) {
        browserName = "DuckDuckGo Browser";
    }
    else if (userAgent.includes("OPR") || userAgent.includes("Opera")) {
        browserName = "Opera Browser";
    }
    else if (userAgent.includes("Chrome") && !userAgent.includes("Edge") && !userAgent.includes("Brave")) {
        browserName = "Google Chrome";
    }
    else if (userAgent.includes("Firefox")) {
        browserName = "Mozilla Firefox";
    }
    else if (userAgent.includes("Safari") && !userAgent.includes("Chrome")) {
        browserName = "Apple Safari";
    }
    else if (userAgent.includes("Edge")) {
        browserName = "Microsoft Edge";
    }
    else if (userAgent.includes("Trident")) {
        browserName = "Internet Explorer";
    }
    const versionMatch = userAgent.match(/(Chrome|Firefox|Safari|Edge|Brave|DuckDuckGo|OPR|Opera)\/(\d+\.\d+)/);
    if (versionMatch) {
        browserVersion = versionMatch[2];
    }

    browserInfoElement.textContent = `Browser: ${browserName} ${browserVersion}`;
}

function updateVPNStatus() {
    const ip = 'https://api.ipify.org?format=json';

    fetch(ip)
        .then(response => response.json())
        .then(data => {
            const userIp = data.ip;
            console.log('User IP:', userIp);

            const apiKey = 'cad8ba55d8f145ffb3fcf2996f693344';
            const url = `https://vpnapi.io/api/${userIp}?key=${apiKey}`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    console.log(data);

                    const isVpn = data.security && data.security.vpn;

                    if (isVpn) {
                        vpnStatusElement.textContent = "VPN: True";
                    } else {
                        vpnStatusElement.textContent = "VPN: False";
                    }
                })
                .catch(error => {
                    vpnStatusElement.textContent = "VPN status unavailable";
                    console.error("Error fetching VPN status from VPNAPI.io:", error);
                });
        })
        .catch(error => {
            vpnStatusElement.textContent = "VPN status unavailable";
            console.error("Error fetching user IP:", error);
        });
}



async function startCamera() {
    try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        webcamElement.srcObject = stream;
    } catch (error) {
        console.error("Error accessing webcam:", error);
        webcamElement.textContent = "Webcam unavailable";
    }
}

updateScreenSize();
updateLocation();
updateIP();
updateBrowserInfo();
updateVPNStatus();

window.addEventListener('resize', updateScreenSize);

animateWave();

startCamera();